<!doctype html>
<dom-module id="admin-session-page">
<link rel="import" href="../bower_components/neon-animation/animations/scale-up-animation.html">
<link rel="import" href="../bower_components/neon-animation/animations/fade-out-animation.html">
	<style is="custom-style">
		paper-material {
			background-color: white;
			margin-top: 5px;
			margin-bottom: 5px;
		}
	</style>
<template>
<iron-ajax id="query" url="../api/1.0/sessions/owned.php" handle-as="json" on-response="onResp"></iron-ajax>
<div class="container">
	<div class="row">
		<div class="12u">
			<paper-material>
				<h2>Session Management</h2>
			</paper-material>
		</div>
	</div>
	<div class="row">
		<div class="6u 12u(xsmall)">
			<paper-material>
				<polyquiz-admin-session-create-form on-reload-sessions="onSessionDeleted"></polyquiz-admin-session-create-form>
			</paper-material>
		</div>
		<div class="6u 12u(xsmall)">
			<paper-material>
				<admin-house-manage-form on-reload-sessions="onSessionDeleted"></admin-house-manage-form>
			</paper-material>
		</div>
	</div>
	
	<div class="row">
		<div class="12u">
			<paper-material>
				<h3>Modify Session</h3>
					<div class="row">
						<div class="12u">
							<paper-material>
								<div class="row">
									<div class="4u 5u(small) 4u(xsmall)">
										<div class="row">
											<div class="12u">Session Name</div>
											<div class="-2u 10u">Quiz Name</div>
										</div>
									</div>
									<div class="2u">
										<div class="row">
											<div class="12u">Id</div>
											<div class="12u">Key</div>
										</div>
									</div>
									<div class="2u 3u(xsmall)">Date</div>
									<div class="1u">House</div>
									<div class="3u 2u(small)">
									</div>
								</div>
							</paper-material>
						</div>
					</div>
					<center><paper-spinner id="rowSpinner" active></paper-spinner></center>
					<div id="rowWrapper">
						<template id="sessionRows" is="dom-repeat" items="[[sessions]]" as="session" on-dom-change="spinnerOff">
							<polyquiz-admin-session-row sessionobject="[[session]]" on-session-deleted="onSessionDeleted"></polyquiz-admin-session-row>
						</template>
					</div>
			</paper-material>
		</div>
	</div>
</div>
</template>
<script>
Polymer({
	is: "admin-session-page",
	onResp: function(e){
		this.sessions = e.detail.response;
	},
	properties: {
		sessions: Array
	},
	spinnerOff: function(e){
		this.$.rowSpinner.active = false;
		this.$.rowSpinner.style.display = "none";
		this.$.rowWrapper.style.display = "block";
	},
	onSessionDeleted: function(e){
		this.$.query.generateRequest();
		this.$.rowSpinner.active = true;
		this.$.rowSpinner.style.display = "block";
		this.$.rowWrapper.style.display = "none";
	},
	ready: function(){
		this.onSessionDeleted();
	}
});
</script>
</dom-module>