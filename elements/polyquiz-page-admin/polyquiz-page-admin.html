<!doctype html>
<dom-module id="polyquiz-page-admin">
	<link rel="import" href="../../bower_components/polymer/polymer.html">
	<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
	<link rel="import" href="polyquiz-admin-login-form.html">
	<link rel="import" href="polyquiz-admin-change-password-form.html">

	<style is="custom-style">
		paper-material {
			background-color: white;
			margin-top: 10px;
			padding: 10px;
		}
	</style>

	<template>
		<iron-ajax auto url="../../api/1.0/admin/status.php" handle-as="json" last-response="{{adminStatus}}"></iron-ajax>
		<div class="container">
			
			<iron-pages id="pageSelector" attrForSelected="data-subpage" selected="[[adminSubpage]]">
				<div class="row" data-subpage="adminhome">
					<div class="8u">
						<paper-material>
							<h2 class="nomargins">Admin Home</h2>
							Please Log-In.
						</paper-material>
					</div>
					<div class="4u">
						<paper-material hidden="[[isAdmin]]">
							<polyquiz-admin-login-form></polyquiz-admin-login-form>
						</paper-material>
						<paper-material hidden="[[!isAdmin]]">
							<polyquiz-admin-change-password-form></polyquiz-admin-change-password-form>
						</paper-material>
					</div>
				</div>
				<div class"row">
				<div class="12u">
					<paper-material>
						Welcome back admin!<br />
						Quick Start Guide:<br />
						1) Create a Quiz under "Edit Quizzes" & add questions to it.<br />
						2) Create a Quiz Session under "Edit Sessions" and be sure to select your desired quiz.<br />
						3) Use the Session Id & Session Key to let others take your quiz.<br />
						4) View the results under "Quiz Results".<br />
						*) Should any quiz taker accidentally exit their quiz early,<br />find their name under "Quizzes In Progress" and give them the "Restore Id" & "Restore Key".
					</paper-material>
				</div>
				</div>
			</iron-pages>
		</div>
	</template>

	<script>
		Polymer({
			is: 'polyquiz-page-admin',
			properties: {
				ctx: {
					type: Object,
					observer: "onContextChanged"
				},
				adminSubpage: Number,
				isAdmin: {
					type: Boolean,
					value: false
				},
				adminStatus: {
					type: Object,
					observer: "onAdminStatusChanged"
				}
			},
			onContextChanged: function(details) {
				if(details.params.subpage != null) {

				} else {
					this.$.pageSelector.select(0);
				}
			},
			onAdminStatusChanged: function(details) {
				if(details.admin){
					isAdmin = true;
					console.log("admin");
				} else {
					isAdmin = false;
					console.log("nbot admin");
				}
			},
			ready: function() {

			}
		});
	</script>